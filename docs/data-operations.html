<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>evops app user manual - Data operations</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="mermaid-theme" content="forest">
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data-operations.html">Data</a></li><li class="breadcrumb-item"><a href="./data-operations.html">Data operations</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">evops app user manual</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Home</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Install</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./setup-evops.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Setup evops app</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Manage</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./manage-evops.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Manage evops app</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Manipulate</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./manipulate-evops.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Manipulate evops app</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-operations.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Data operations</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Model</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./statistical-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistical models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model-operations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model operations</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#extract-sample-data-esd-pipeline-optional" id="toc-extract-sample-data-esd-pipeline-optional" class="nav-link active" data-scroll-target="#extract-sample-data-esd-pipeline-optional">Extract Sample Data (esd) pipeline: <em>Optional</em></a></li>
  <li><a href="#extract-transform-load-etl-pipeline-mandatory" id="toc-extract-transform-load-etl-pipeline-mandatory" class="nav-link" data-scroll-target="#extract-transform-load-etl-pipeline-mandatory">Extract Transform Load (etl) pipeline: <em>Mandatory</em></a></li>
  <li><a href="#outlier-data-extraction-ode-pipeline-optional" id="toc-outlier-data-extraction-ode-pipeline-optional" class="nav-link" data-scroll-target="#outlier-data-extraction-ode-pipeline-optional">Outlier Data Extraction (ode) pipeline: <em>Optional</em></a></li>
  <li><a href="#object-detection-statistics-ods-pipeline-recommended" id="toc-object-detection-statistics-ods-pipeline-recommended" class="nav-link" data-scroll-target="#object-detection-statistics-ods-pipeline-recommended">Object Detection Statistics (ods) pipeline: <em>Recommended</em></a></li>
  <li><a href="#impute-transform-load-itl-pipeline-mandatory" id="toc-impute-transform-load-itl-pipeline-mandatory" class="nav-link" data-scroll-target="#impute-transform-load-itl-pipeline-mandatory">Impute Transform Load (itl) pipeline: <em>Mandatory</em></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data-operations.html">Data</a></li><li class="breadcrumb-item"><a href="./data-operations.html">Data operations</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Data operations</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- # Exploit evops app data pipelines -->
<p>The evops app pipelines must be executed in the order of the following sections which are tagged as <strong>Optional</strong> (that is, can be skipped), <strong>Mandatory</strong> (that is, to run absolutely), <strong>Recommended</strong> (that is, can provide useful information to consider in the next pipeline) or <strong>Independent</strong> (that is, can be executed independently on previous pipelines).</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember to upload all datasets to be processed by the evops app running container in the dedicated directory on the host computer specified when starting it. From now on, the input data are assumed to be in that directory unless specify.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>All two-dimensional datasets generated by any pipeline are automatically saved in the <strong>workspace</strong> directory on the evops app. Hence, these results are also available in the directory on the host computer dedicated to the evops app running container.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Before rerunning a pipeline with modified input arguments on datasets from a given experimentation, it is recommended to delete all results generated during the previous run unless specify, in which case previous results will be overwritten.</p>
</div>
</div>
<section id="extract-sample-data-esd-pipeline-optional" class="level1">
<h1>Extract Sample Data (esd) pipeline: <em>Optional</em></h1>
<p>The notebook associated with <strong>esd_pipeline</strong> is the file <strong>esd_pipeline.ipynb</strong>. The main objective of <strong>esd_pipeline</strong> is to extract a small sample of size assigned to the variable <strong>data_sample_size</strong> from all data stored in the folder whose name is assigned to the variable <strong>experimentation_dir</strong> which contains the following elements.</p>
<ul>
<li><p><strong>ground_truth_data</strong>: It is a variable for the name of the csv file of ground truth data.</p></li>
<li><p><strong>estimated_data</strong>: It is a variable for the name of the csv file of estimated data.</p></li>
<li><p><strong>error_data</strong>: It is a variable for the name of the csv file of error data.</p></li>
<li><p><strong>images_dir</strong>: It is a variable for the name of the folder containing images.</p></li>
</ul>
<p>The extracted datasets are stored in the folder whose name is made of <strong>sample+experimentation_dir</strong>. Its contents are organized like that of the folder indicated in the variable <strong>experimentation_dir</strong>.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  I[Input] --&gt; A(experimentation_dir)
  I --&gt; B(data_sample_size)
  A --&gt; A1(images_dir)
  A --&gt; A2(ground_truth_data)
  A --&gt; A3(estimated_data)
  A --&gt; A4(error_data)
  A --&gt; C{esd_pipeline}
  B --&gt; C
  C --&gt; O[output]
  O --&gt; D(sample+experimentation_dir)
  D --&gt; D1(images_dir)
  D --&gt; D2(ground_truth_data)
  D --&gt; D3(estimated_data)
  D --&gt; D4(error_data)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="extract-transform-load-etl-pipeline-mandatory" class="level1">
<h1>Extract Transform Load (etl) pipeline: <em>Mandatory</em></h1>
<p>The notebook associated with <strong>etl_pipeline</strong> is the file <strong>etl_pipeline.ipynb</strong>. The main objective of this pipeline is to construct the file <strong>merged_data.csv</strong>. This file contains information on the instantaneous positions and velocities of the car sensors studied, the statistics of occurrences as well as the areas and locations associated with all classes of traffic scene objects. To produce the file <strong>merged_data.csv</strong>, the <strong>etl_pipeline</strong> requires two main information as input. The former is the folder whose name is assigned to the variable <strong>experimentation_dir</strong> which contains the following elements.</p>
<ul>
<li><p><strong>ground_truth_data</strong>: It is a variable for the name of the csv file of ground truth data.</p></li>
<li><p><strong>estimated_data</strong>: It is a variable for the name of the csv file of estimated data.</p></li>
<li><p><strong>error_data</strong>: It is a variable for the name of the csv file of error data.</p></li>
<li><p><strong>images_dir</strong>: It is a variable for the name of the folder containing images.</p></li>
</ul>
<p>The latter is a positive integer assigned to the variable <strong>batch_size</strong> which is the number of images to process at each iteration by the object detector to avoid a memory issue. The outputs are stored in the folder whose name is assigned to the variable <strong>experimentation_dir</strong>. This folder includes the following elements.</p>
<ul>
<li><p><strong>split_images_without_detections</strong>: It is a folder in which all images from the folder whose name is assigned to the variable <strong>images_dir</strong> are partitioned. Images of the <strong>k</strong>-th partition are stored in the folder <strong>split_k</strong>.</p></li>
<li><p><strong>split_images_with_detections</strong>: It is a folder organized like <strong>split_images_without_detections</strong> but contains annotated images by bounding boxes associated with all detected object classes.</p></li>
<li><p><strong>split_images_detection_coordinates</strong>: It a folder organized like <strong>split_images_with_detections</strong> but instead of annotated images, it contains the coordinates of the related bounding boxes in csv files.</p></li>
<li><p><strong>extracted_detections.csv</strong>: It is a csv file which gathers the contents of all csv files stored in the folder <strong>split_images_detection_coordinates</strong>.</p></li>
<li><p><strong>transformed_detections.csv</strong>: It is a csv file which results from the transformation of the csv file <strong>extracted_detections.csv</strong> in order to synthetize it and provide more information on detections in some additional variables.</p></li>
<li><p><strong>merged_data.csv</strong>: It is the target file of <strong>etl_pipeline</strong>. This file contains not only variables from the file <strong>transformed_detections.csv</strong> and those from the file whose name is assigned to the variable <strong>error_data</strong>, but also the variables of velocity calculated using data from the files whose names are assigned to the variables <strong>ground_truth_data</strong> and <strong>estimated_data</strong>.</p></li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
 I[Input] --&gt; A(experimentation_dir)
 I --&gt; B(batch_size)
 A --&gt; A1(images_dir)
 A --&gt; A2(ground_truth_data)
 A --&gt; A3(estimated_data)
 A --&gt; A4(error_data)
 A --&gt; C{etl_pipeline}
 B --&gt; C
 C --&gt; O[output]
 O --&gt; D(experimentation_dir)
 D --&gt; D3(split_images_without_detections)
 D --&gt; D2(split_images_with_detections)
 D --&gt; D1(split_images_detection_coordinates)
 D --&gt; D4(extracted_detections.csv)
 D --&gt; D5(transformed_detections.csv)
 D --&gt; D6(merged_data.csv)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="outlier-data-extraction-ode-pipeline-optional" class="level1">
<h1>Outlier Data Extraction (ode) pipeline: <em>Optional</em></h1>
<p>The notebook associated with <strong>ode_pipeline</strong> is the file <strong>ode_pipeline.ipynb</strong>. The main objective of this pipeline is to extract all outliers associated a given variable. Before running the <strong>ode_pipeline</strong>, appropriate values must be assigned to the following input arguments.</p>
<ul>
<li><p><strong>coefficient_iqr</strong>: It is a variable for the real value used to calculate the bounds of an interval out of which data are considered as outliers.</p></li>
<li><p><strong>experimentation_dir</strong>: It is a variable for the name of folder which contains both the csv file of errors whose name is assigned to the variable <strong>error_data</strong> and the folder of images whose name is assigned to the variable <strong>images_dir</strong>.</p></li>
<li><p><strong>response_var</strong>: It is a variable for the name of the considered column in the file referenced by the variable <strong>error_data</strong>.</p></li>
</ul>
<p>The outputs are stored in the folder whose name is assigned to the variable <strong>experimentation_dir</strong>. In this directory, images and data associated with the outliers are stored in the sub folder whose name is assigned to the variable <strong>response_var</strong> of the folders <strong>outliers_images</strong> and <strong>outliers_data</strong>, respectively. The name of the csv file containing outliers data is made of <strong>outliers+response_var+csv</strong>.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  I[Input] --&gt; A(experimentation_dir)
  A --&gt; A1(error_data)
  A --&gt; A2(images_dir)
  I[Input] --&gt; B(response_var)
  I[Input] --&gt; C(coefficient_iqr)
  A --&gt; D{ode_pipeline}
  B --&gt; D
  C --&gt; D
  D --&gt; O[output]
  O --&gt; E(experimentation_dir)
  E --&gt; F(outliers_images)
  F --&gt; F1(response_var)
  F1 --&gt; F2(images_files)
  E --&gt; G(outliers_data)
  G --&gt; H(response_var)
  H --&gt; H1(outliers+response_var+csv)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  I[Input] --&gt; A(experimentation_dir)
  A --&gt; A1(error_data)
  A --&gt; A2(images_dir)
  I[Input] --&gt; B(response_var)
  I[Input] --&gt; C(coefficient_iqr)
  A --&gt; D{ode_pipeline}
  B --&gt; D
  C --&gt; D
  D --&gt; O[output]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  O[output] --&gt; E(experimentation_dir)
  E --&gt; F(outliers_images)
  F --&gt; F1(response_var)
  F1 --&gt; F2(images_files)
  E --&gt; G(outliers_data)
  G --&gt; H(response_var)
  H --&gt; H1(outliers+response_var+csv)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="object-detection-statistics-ods-pipeline-recommended" class="level1">
<h1>Object Detection Statistics (ods) pipeline: <em>Recommended</em></h1>
<p>The notebook associated with <strong>ods_pipeline</strong> is the file <strong>ods_pipeline.ipynb</strong>. The main objective of this pipeline is to extract statistics on the total number of detections associated with each class of objects. These statistics along with the related bar chart are displayed in the notebook. The detection statistics are also stored in the csv file named <strong>detection_statistics.csv</strong> in the directory whose name is assigned to the input argument <strong>experimentation_dir</strong>. The <strong>ods_pipeline</strong> depends on the <strong>etl_pipeline</strong> since its execution requires that the csv file <strong>merged_data.csv</strong> be present in the directory referenced by the variable <strong>experimentation_dir</strong>. This is why the name <strong>merged_data.csv</strong> is assigned by default to the input argument <strong>merged_data</strong>.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  I[Input] --&gt; A(experimentation_dir)
  A --&gt; A1(merged_data)
  A --&gt; B{ods_pipeline}
  B --&gt; O[output]
  O --&gt; C(experimentation_dir)
  C --&gt; C1(detection_statistics.csv)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="impute-transform-load-itl-pipeline-mandatory" class="level1">
<h1>Impute Transform Load (itl) pipeline: <em>Mandatory</em></h1>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Before running <strong>itl_pipeline</strong>, it is recommended to run <strong>ods_pipeline</strong> and explore the extracted detection statistics which are ordered from the most detected object class to the least detected object class. Then, define the number of object classes whose detection statistics are considered as large enough. That number is the value which must be assigned to the input variable <strong>nlargest_classes</strong> of the <strong>itl_pipeline</strong>.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In general, the file <strong>merged_data.csv</strong> generated by <strong>etl_pipeline</strong> contains non standardized data and a significant number of misssing values due to the absence of some object classes in certain parts of the traffic scene.</p>
</div>
</div>
<p>The notebook associated with <strong>itl_pipeline</strong> is the file <strong>itl_pipeline.ipynb</strong>. The objectives of <strong>itl_pipeline</strong> are to impute the missing values in the file <strong>merged_data.csv</strong> and to standardize the values of its variables in order to generated data ready to feed statistical learning models.</p>
<p>To run the <strong>itl_pipeline</strong>, a file named <strong>merged_data.csv</strong> generated by <strong>etl_pipeline</strong> must be present in the directories referenced by the variables <strong>experimentation_train_dir</strong> and <strong>experimentation_test_dir</strong>. In addition, the studied response variable name must be assigned to the input argument <strong>response_var</strong> while the number of most detected object classes (identified when exploring the output generated by <strong>ods_pipeline</strong>) must be assigned to the input argument <strong>nlargest_classes</strong>.</p>
<p>Outputs are stored in the sub folder <strong>processed_data</strong> of the directory whose name is assigned to the variable <strong>experimentation_train_dir</strong>. In the directory <strong>processed_data</strong>, the sub folder whose name is the value assigned to the input argument <strong>response_var</strong> contains the four csv files conventionally named as follows.</p>
<ul>
<li><p><strong>experimentation_train_dir+train+response_var+response.csv</strong>: It is the file which contains the train response variable.</p></li>
<li><p><strong>experimentation_train_dir+train+response_var+scaled_covariates.csv</strong>: It is the file which contains the train predictor variables.</p></li>
<li><p><strong>experimentation_test_dir+test+response_var+response.csv</strong>: It is the file which contains the test response variable.</p></li>
<li><p><strong>experimentation_test_dir+test+response_var+scaled_covariates.csv</strong>: It is the file which contains the test predictor variables.</p></li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  I[Input] --&gt; A(experimentation_train_dir)
  A --&gt; A1(merged_data.csv)
  I[Input] --&gt; B(experimentation_test_dir)
  B --&gt; B1(merged_data.csv)
  I --&gt; D(nlargest_classes)
  I --&gt; C(response_var)
  A --&gt; E{itl_pipeline}
  B --&gt; E
  C --&gt; E
  D --&gt; E
  E --&gt; O[output]
  O --&gt; F(experimentation_train_dir)
  F --&gt; G(processed_data)
  G --&gt; H(response_var)
  H --&gt; H1(experimentation_train_dir+train+response_var+response.csv)
  H --&gt; H2(experimentation_train_dir+train+response_var+scaled_covariates.csv)
  H --&gt; H3(experimentation_test_dir+test+response_var+response.csv)
  H --&gt; H4(experimentation_test_dir+test+response_var+scaled_covariates.csv)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  I[Input] --&gt; A(experimentation_train_dir)
  A --&gt; A1(merged_data.csv)
  I[Input] --&gt; B(experimentation_test_dir)
  B --&gt; B1(merged_data.csv)
  I --&gt; D(nlargest_classes)
  I --&gt; C(response_var)
  A --&gt; E{itl_pipeline}
  B --&gt; E
  C --&gt; E
  D --&gt; E
  E --&gt; O[output]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  O[output] --&gt; F(experimentation_train_dir)
  F --&gt; G(processed_data)
  G --&gt; H(response_var)
  H --&gt; H1(experimentation_train_dir+train+response_var+response.csv)
  H --&gt; H2(experimentation_train_dir+train+response_var+scaled_covariates.csv)
  H --&gt; H3(experimentation_test_dir+test+response_var+response.csv)
  H --&gt; H4(experimentation_test_dir+test+response_var+scaled_covariates.csv)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>